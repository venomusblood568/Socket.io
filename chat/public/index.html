<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
        integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
        crossorigin="anonymous"
    />
    <link rel="stylesheet" href="css/style.css" />
    <title>Chat</title>
</head>
<body>
    <div class="join-container">
        <header class="join-header">
            <h1>Chat</h1>
        </header>
        <main class="join-main">
            <form id="chat-form">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input
                        type="text"
                        name="username"
                        id="username"
                        class="form-control"
                        placeholder="Enter username..."
                        required
                    />
                </div>
                <div class="form-group">
                    <label for="custom-room">Enter Custom Room</label>
                    <input
                        type="text"
                        name="custom-room"
                        id="custom-room"
                        class="form-control"
                        placeholder="Room name..."
                        required
                    />
                </div>
                <div class="form-group">
                    <label for="roomLimit">Set Room Limit</label>
                    <input
                        type="number"
                        id="roomLimit"
                        class="form-control"
                        placeholder="room limit"
                        min="1"
                        max="50"
                    />
                </div>
                <button type="submit" class="btn btn-primary">Join Chat</button>
            </form>
        </main>
    </div>

    <script>
        // Add event listener for form submission
        document.getElementById('chat-form').addEventListener('submit', function (e) {
            e.preventDefault(); // Prevent default form submission

            // Get the input values
            const username = document.getElementById('username').value.trim();
            const room = document.getElementById('custom-room').value.trim();
            const limit = document.getElementById('roomLimit').value.trim(); // Get room limit value

            // Check if the username and room fields are filled
            if (!username || !room) {
                alert('Please enter both username and room name.');
                return;
            }

			// Parse the room limit to an integer
			const roomLimit = parseInt(limit, 10);
			if (isNaN(roomLimit) || roomLimit < 1 || roomLimit > 10) {
				alert('If entering someone else room keep room limit as 1');
				return;
			}

            // Redirect to the chat page with the chosen room name, username, and room limit as query parameters
            window.location.href = `chat.html?room=${encodeURIComponent(room)}&username=${encodeURIComponent(username)}&limit=${encodeURIComponent(limit)}`;
        });
    </script>
</body>
</html>
